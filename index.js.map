{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst myApiKey = \"49372169-96077d899f4beec9c9139b15f\";\nconst URL = \"https://pixabay.com/api/\";\nconst keywordInput = document.querySelector(\"input\");\n\nexport async function fetchData(keyword, page) {\nconst parametrs = new URLSearchParams({\n    key: myApiKey,\n    q: keyword,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: page,\n    per_page: 15,\n});\n\nconst response = await axios.get(`${URL}?${parametrs}`);\nreturn response.data\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: `alt`,\n    captionDelay: 250,\n});\n\nexport function createMarkup(response) {\n\nconst markup = response.hits\n    .map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => \n    `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${webformatURL}\">\n    <img\n    class=\"gallery-image\"\n    src=\"${largeImageURL}\"\n    alt= \"${tags.split(`, `).slice(0, 3).join(`, `)}\"\n    width=\"360px\"\n    height=\"200px\"\n    />\n    </a>\n    <ul class=\"image-titles\">\n    <li>Likes<br>${likes}</br></li>\n    <li>Views<br>${views}</br></li>\n    <li>Comments<br>${comments}</br></li>\n    <li>Downloads<br>${downloads}</br></li>\n    </ul>\n    </li>`)\n    .join(\"\");\n\ngallery.insertAdjacentHTML(\"beforeend\", markup);\n\nlightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchData } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector(\"form\");\nconst keywordInput = document.querySelector(\"input\");\nconst btnMore = document.querySelector(\".button-more\");\nconst loader = document.querySelector(\".loader\");\nconst loaderMore = document.querySelector(\".more\")\n\nlet keyword = \"\";\nconst limit = 15;\nlet totalPages = 0;\n\nconst btnMoreShow = () => btnMore.style.display = `block`;\nconst btnMoreHide = () => btnMore.style.display = `none`;\n\nform.addEventListener(\"submit\", reserch);\nlet page = 1;\n\nasync function reserch(event) {\n    event.preventDefault();\n    \n    document.querySelector(\".gallery\").innerHTML = \"\";\n\n    keyword = keywordInput.value.trim();\n  if (!keyword) {\n    iziToast.error({\n      message: \"Please enter a search query before submitting!\",\n      position: \"topRight\"\n    });\n    return;\n  }\n\n  loader.style.display = `block`;\n  btnMoreHide();\n\n    try {\n        const response = await fetchData(keyword, page);\n        totalPages = Math.ceil(response.totalHits / limit);\n          \n        if (response.hits.length === 0) {\n            iziToast.error({\n              message: \"Sorry, there are no images matching your search query. Please try again!\",\n              position: \"topRight\",\n              closeOnClick: true,\n              color: `#fafafb`,\n              messageColor: `#fafafb`,\n              backgroundColor: '#ef4040',\n            });\n            btnMoreHide();\n            return;\n        }\n        createMarkup(response);\n    \n        page += 1;\n\n        if (page > totalPages) {\n            btnMoreHide();\n            return iziToast.info({\n              position: \"topRight\",\n              message: \"We're sorry, but you've reached the end of search results.\"\n          })\n        } else {\n            btnMoreShow();\n          }\n    } catch (error) {\n        iziToast.error({\n              message: \"Sorry, there are no images matching your search query. Please try again!\",\n              position: \"topRight\",\n              closeOnClick: true,\n              color: `#fafafb`,\n              messageColor: `#fafafb`,\n              backgroundColor: '#ef4040',\n            })\n    } finally {\n        loader.style.display = `none`;\n    };\n\n};\n\nbtnMore.addEventListener(\"click\", showMore);\n\nasync function showMore() {\n    btnMoreHide();\n    loaderMore.style.display = `block`;\n\n    try {\n    const response = await fetchData(keyword, page);\n    totalPages = Math.ceil(response.totalHits / limit);\n\n        createMarkup(response);\n\n        page += 1;\n        scrollAfterLoad();\n\n        function scrollAfterLoad() {\n            const card = document.querySelector(\".gallery-item\"); \n            if (card) {\n              const galleryItemHeight = card.getBoundingClientRect().height;\n              const scrollHeight = galleryItemHeight * 2;\n              window.scrollBy({\n                top: scrollHeight,\n                behavior: \"smooth\",\n              });\n            }\n          }          \n        if (page > totalPages) {\n            btnMoreHide();\n            return iziToast.info({\n              position: \"topRight\",\n              message: \"We're sorry, but you've reached the end of search results.\"\n            });\n          } else {\n            btnMoreShow();\n          }\n    } catch (error) {\n        iziToast.error({\n              message: \"Sorry, there are no images matching your search query. Please try again!\",\n              position: \"topRight\",\n              closeOnClick: true,\n              color: `#fafafb`,\n              messageColor: `#fafafb`,\n              backgroundColor: '#ef4040',\n            })\n    } finally {\n        loaderMore.style.display = `none`;\n    };\n};\n\n \n"],"names":["myApiKey","URL","fetchData","keyword","page","parametrs","axios","gallery","lightbox","SimpleLightbox","createMarkup","response","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","keywordInput","btnMore","loader","loaderMore","limit","totalPages","btnMoreShow","btnMoreHide","reserch","event","iziToast","showMore","scrollAfterLoad","card","scrollHeight"],"mappings":"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"}